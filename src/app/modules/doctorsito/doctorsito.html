<!-- Navbar superior -->
<nav class="doctor-navbar">
  <div class="doctor-navbar-content">
    <span class="doctor-navbar-title">DentistaYA</span>
    <button class="doctor-navbar-logout" (click)="cerrarSesion()">Cerrar sesión</button>
  </div>
</nav>

<div class="doctor-welcome-container">
  <h1 class="doctor-title" style="text-align: center; width: 100%;">Bienvenido Doctor</h1>

  <div class="doctor-actions" style="justify-content: center; gap: 1.5rem;">
    <button class="doctor-action-btn" (click)="abrirModalHistorial()">Historial clínico</button>
    <button class="doctor-action-btn" disabled>Recetas</button>
    <button class="doctor-action-btn" disabled>Citas Programadas</button>
    <button class="doctor-action-btn" disabled>Notas para doctores</button>
  </div>
</div>

<!-- Modal para historial clínico -->
<div class="modal-overlay" *ngIf="modalHistorialAbierto" (click)="cerrarModalHistorial()"></div>
<div class="modal-historial" *ngIf="modalHistorialAbierto">
  <div class="modal-content">
    <h2>Historial de Pacientes</h2>
    <div *ngIf="error" class="error">{{ error }}</div>
    <table *ngIf="patients.length">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>DNI</th>
          <th>Fecha de nacimiento</th>
          <th>Género</th>
          <th>Historial médico</th>
          <th>Creado</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of patients">
          <td>{{ p.name }}</td>
          <td>{{ p.dni }}</td>
          <td>{{ p.birthDate | date:'yyyy-MM-dd' }}</td>
          <td>{{ p.gender }}</td>
          <td>
            <ul>
              <li *ngFor="let h of p.medicalHistory">{{ h }}</li>
            </ul>
          </td>
          <td>{{ p.createdAt | date:'yyyy-MM-dd' }}</td>
        </tr>
      </tbody>
    </table>
    <div *ngIf="!patients.length && !error">No hay pacientes registrados.</div>
    <button class="close-modal-btn" (click)="cerrarModalHistorial()">Cerrar</button>
  </div>
</div>
<div class="dentist-bar">
  Sonríe, tu salud dental es nuestra prioridad.
</div>
